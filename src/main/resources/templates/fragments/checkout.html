<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<title>Affablebean</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<link rel="stylesheet" type="text/css"
	href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">

<link rel="stylesheet" type="text/css" media="all"
	href="../../static/css/affablebean.css"
	th:href="@{/css/affablebean.css}" />

</head>

<body>
	<div th:fragment="frag_checkout">
		<div id="singleColumn">
			<h2 th:text="#{checkout}"></h2>
			<p th:text="#{checkoutText}"></p>		
			<br>
			
	        <form class="form-horizontal" action="#" th:action="@{/purchase}" th:object="${checkoutForm}" 
	        	method="post">
			
				<div class="form-group">
					<label for="name" class="col-sm-2 control-label" th:text="#{customerName}">
					</label>
		
					<div class="col-sm-10">
						<input type="text" class="form-control" name="name" th:field="*{name}"
									 maxlength="45" 
									 placeholder="At least 8 chars and no more than 45 chars"									 
									 size="31"
									 value="">
					</div>
				</div>
		
				<div class="form-group">
					<label for="email" class="col-sm-2 control-label" th:text="#{email}">
					</label>
		
					<div class="col-sm-10">
						<input type="email" class="form-control" name="email" th:field="*{email}"
									 maxlength="45" 
									 placeholder="At least 8 chars one of which must be '@' and no more than 45 chars"							 
									 size="31"
									 value="">
					</div>
				</div>
		
				<div class="form-group">
					<label for="phone" class="col-sm-2 control-label" th:text="#{phone}">
					</label>
		
					<div class="col-sm-10">
						<input type="text" class="form-control" name="phone" th:field="*{phone}"
									 maxlength="16" 
									 placeholder="At least 8 chars and no more than 30 chars"									 
									 size="31"
									 value="">
					</div>
				</div>
		
				<div class="form-group">
					<label for="address" class="col-sm-2 control-label" th:text="#{address}">
					</label>
		
					<div class="col-sm-10">
						<input type="text" class="form-control" name="address" th:field="*{address}"
									 maxlength="45" 
									 placeholder="At least 8 chars and no more than 45 chars"									 
									 size="31"
									 value="">
					</div>
				</div>
		
				<div class="form-group">
					<label for="creditcard" class="col-sm-2 control-label" th:text="#{creditCard}">
					</label>
		
					<div class="col-sm-10">
						<input type="text" class="form-control" name="creditcard" th:field="*{creditCard}"
									 maxlength="19" 
									 placeholder="At least 8 chars and no more than 19 chars"									 
									 size="31"
									 value="">
					</div>
				</div>
		
				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
						<button type="submit" class="btn btn-primary">
							<span th:text="#{submit}"></span>
						</button>
					</div>
				</div>
			</form>		
		
			<div id="infoBox">
				<ul>
					<li th:text="#{nextDayGuarantee}"></li>
					<li th:text="#{phone}">
						<span th:text="#{deliveryFee1}">
						</span>					
					
						&euro; 
						<span th:text="${#numbers.formatDecimal(surcharge, 0, 'COMMA', 2, 'POINT')}">
							10.00
						</span>
						
						<span th:text="#{deliveryFee2}">
						</span>					
					</li>
				</ul>
		
				<table id="priceBox">
					<tr>
						<td th:text="#{subtotal} + ':'"></td>
						<td class="checkoutPriceColumn">
							&euro; 
							<span th:text="${#numbers.formatDecimal(cart.subtotal, 0, 'COMMA', 2, 'POINT')}"></span>						
						</td>
					</tr>
		
					<tr>
						<td th:text="#{surcharge} + ':'"></td>
						<td class="checkoutPriceColumn" th:text="#{phone}">
							&euro; 
							<span th:text="${#numbers.formatDecimal(surcharge, 0, 'COMMA', 2, 'POINT')}"></span>						
						</td>
					</tr>
		
					<tr>
						<td class="total" th:text="#{total} + ':'"></td>
						<td class="total checkoutPriceColumn" th:text="#{phone}">
							&euro; 
							<span th:text="${#numbers.formatDecimal((cart.subtotal + surcharge), 0, 'COMMA', 2, 'POINT')}"></span>						
						</td>
					</tr>
				</table>
			</div>
		</div>
		
		<script type="text/javascript">		
 			$(document).ready(function() {
 				$("#checkoutForm").validate({
 					rules: {
 						name: {
 							minlength: 8,
 							maxlength: 45,
 							required: true
 						},
 						email: {
 							email: true,
 							minlength: 8,
 							maxlength: 45,
 							required: true
 						},
 						phone: {
 							minlength: 8,
 							maxlength: 30,
 							required: true,
 							number: true
 						},
 						address: {
 							minlength: 8,
 							maxlength: 45,
 							required: true
 						},
 						creditcard: {
 							creditcard: true,
 							minlength: 8,
 							maxlength: 19,
 							required: true
 						}
 					}
 				});
 			});
 		</script> 
 				
	</div>

	<script type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>

</body>
</html>
