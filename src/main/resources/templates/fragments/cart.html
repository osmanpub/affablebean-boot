<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<title>Affablebean</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<link rel="stylesheet" type="text/css"
	href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">

<link rel="stylesheet" type="text/css" media="all"
	href="../../static/css/affablebean.css"
	th:href="@{/css/affablebean.css}" />

</head>

<body>
	<div th:fragment="frag_cart">
		<div id="singleColumn">
		
			<div th:if="${cart.numberOfItems == 0}}">
				<span th:text="#{yourCartEmpty}"></span>				
			</div>
						
			<div th:if="${cart.numberOfItems gt 1}}">
				<span th:text="#{yourCartContains} ${cart.numberOfItems} #{items}"></span>				
			</div>
		
			<div id="actionBar">
		
				<div th:if="${cart.numberOfItems gt 0}}">
					<a href="@{/viewCart(clear=true)}" class="bubble hMargin">
						<span th:text="#{clearCart}"></span>
					</a>
				</div>
		
				<a href="@{/index}" class="bubble hMargin">
					<span th:text="#{continueShopping}"></span>
				</a>
		
				<div th:if="${cart.numberOfItems gt 0}}">
					<a href="@{/checkout}" class="bubble hMargin">
						<span th:utext="#{proceedCheckout}"></span>
					</a>
				</div>
			</div>
		
			<th:block th:if test="cart.numberOfItems gt 0}">
		
				<h4 id="subtotal">
					<span th:text="#{subtotal}"></span>
					<span th:text="${#numbers.formatDecimal(cart.subtotal, 0, 'COMMA', 2, 'POINT')} + ' ' + #{unit}"></span>										
				</h4>
		
				<table id="cartTable" th:each="cartItem iterStat : ${cart.items}">
		
<!-- 					<tr class="header"> -->
<!-- 						<th th:text="#{product}"></th> -->
<!-- 						<th th:text="#{name}"></th> -->
<!-- 						<th th:text="#{price}"></th> -->
<!-- 						<th th:text="#{quantity}"></th> -->
<!-- 					</tr> -->
		
						<tr th:class="${iterStat.odd} ? 'white' : 'lightBlue'">
		
						<td>
							<img src="${initParam.productImagePath}${product.name}.png"
									 alt="<fmt:message key="${cartItem.product.name}"/>">
						</td>
	
						<td th:utext="#{product.name}"></td>
	
						<td> 
							&euro; 
							<span th:text="${#numbers.formatDecimal(cartItem.total, 0, 'COMMA', 2, 'POINT')}">
								10.00
							</span>
							<br>
							<span class="smallText" 
								th:text="${#numbers.formatDecimal(cartItem.product.price, 0, 'COMMA', 2, 'POINT')} + ' ' + #{unit}">
								10.00
							</span>
						</td>			
	
						<td>
							<form class="form-horizontal" role="form" 
										action="/updateCart(id=${cartItem.product.id})" method="post">
	
								<input type="hidden" name="productId" value="${cartItem.product.id}">
	
								<div class="form-group">
									<div class="col-sm-10">
										<input type="number" class="form-control"
													 maxlength="2"
													 size="2"
													 th:value="${cartItem.quantity}"
													 name="quantity"
													 style="margin:5px">
									</div>
								</div>
	
								<div class="form-group">
									<div class="col-sm-offset-2 col-sm-10">
										<button type="submit" class="btn btn-primary btn-sm">
											<span th:text="#{update}"></span>
										</button>										
									</div>
								</div>
							</form>						
						</td>
					</tr>
		
				</table>		
			</th:block>
		</div>
	</div>

	<script type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>

</body>
</html>